<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>요청 상세</title>
</head>
<body>
<h1>요청 상세</h1>
<nav>
    <a href="/requests">목록</a> |
    <a th:href="@{/requests/{id}/edit(id=${requestItem.id})}">수정</a>
</nav>

<section>
    <p><strong>제목:</strong> <span th:text="${requestItem.title}"></span></p>
    <p><strong>내용:</strong></p>
    <p th:text="${requestItem.content}"></p>
    <p><strong>사용자 이메일:</strong> <span th:text="${requestItem.userEmail}"></span></p>
    <p><strong>상태:</strong> <span th:text="${requestItem.status}"></span></p>
    <p><strong>등록일:</strong> <span th:text="${requestItem.createdAt}"></span></p>
    <p><strong>처리일:</strong> <span th:text="${requestItem.processedAt}"></span></p>
</section>

<section>
    <h3>상태 변경</h3>
    <form th:action="@{/requests/{id}/status(id=${requestItem.id})}" method="post">
        <select name="status">
            <option th:each="s : ${statuses}" th:value="${s}" th:text="${s}" th:selected="${s == requestItem.status}"></option>
        </select>
        <button type="submit">변경</button>
    </form>
</section>

<section>
    <h3>첨부 파일</h3>
    <ul>
        <li th:each="f : ${requestItem.files}">
            <a th:href="@{/requests/files/{id}(id=${f.id})}" th:text="${f.originalName}"></a>
        </li>
    </ul>
    <form th:action="@{/requests/{id}/files(id=${requestItem.id})}" method="post" enctype="multipart/form-data">
        <input type="file" name="files" multiple />
        <button type="submit">파일 추가</button>
    </form>
</section>

<form th:action="@{/requests/{id}/delete(id=${requestItem.id})}" method="post">
    <button type="submit">삭제</button>
</form>

</body>
</html>
